// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"database/sql"
	"github.com/ATenderholt/dockerlib"
	"github.com/ATenderholt/rainbow/internal/http"
	"github.com/ATenderholt/rainbow/internal/service"
	"github.com/ATenderholt/rainbow/settings"
	"github.com/go-rel/rel"
	"github.com/go-rel/sqlite3"
)

import (
	_ "github.com/mattn/go-sqlite3"
)

// Injectors from inject.go:

func InjectApp(cfg *settings.Config, db *sql.DB) (App, error) {
	dockerController, err := dockerlib.NewDockerController()
	if err != nil {
		return App{}, err
	}
	repository := InjectDb(db)
	motoService := service.NewMotoService(cfg, dockerController, repository)
	sqsService := service.NewSqsService(cfg, dockerController, repository)
	proxy := http.NewProxy(cfg)
	mux := http.NewChiMux(motoService, sqsService, proxy)
	app := NewApp(cfg, dockerController, mux, motoService, sqsService)
	return app, nil
}

// inject.go:

func InjectDb(db *sql.DB) rel.Repository {
	adapter := sqlite3.New(db)
	return rel.New(adapter)
}
